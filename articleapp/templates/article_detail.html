{% extends 'mainapp/base.html' %}
{% load static %}

{% block content %}

<section id="blog" class="blog">
    <div class="container">
        <div class="article-edit-form">   
          
            <div class="post-entry">
                <h2>{{ article.title }}</h2>
                <p>{{ article.author }}</p>
                <p>{{ article.category }}</p>
                <p>{{ article.content | safe }}</p>
                {#<p>{{ article.image }}</p>#}
            </div>

                <a href='{% url 'article:edit' article.pk %}'>Редактировать</a>
                <a href='{% url 'article:delete' article.pk %}'>Удалить</a>
                <br>
                {% if user.is_authenticated %}

                <div class="d-flex flex-row "
                     style="margin-top: 10px; margin-bottom: 10px;">
                    <form action="{% url 'article:like-art' article.pk %}"
                          method="POST">
                        {% csrf_token %}
                        <input type="hidden"
                               name="article_id"
                               value="{{article.pk}}">
                        {% if user not in article.liked.all %}
                            <button class="btn btn-success btn-sm"
                                    type="submit"
                                    style="margin-right: 10px;">
                                Нравится
                            </button>
                        {% else %}
                            <button class="btn btn-danger btn-sm"
                                    type="submit"
                                    style="margin-right: 10px;">
                                Не нравится
                            </button>
                        {% endif %}
                    </form>

                </div>
          
                {% endif %}

                    <strong class="fa fa-thumbs-up"
                            style="font-size: 21px; margin-top: 5px;">
                        {{ article.liked.all.count }}</strong>
                <hr>
                {% include "include_comments.html" %}
          
        </div>
    </div>
</section>
{% endblock content %}          
